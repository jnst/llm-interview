# UI/UX仕様書

## 画面仕様詳細

### 1. ホーム画面 (/)

#### レイアウト
```
┌─────────────────────────────────────┐
│ [≡] LLM Interview        [🌙/☀️]    │ ← ヘッダー
├─────────────────────────────────────┤
│                                     │
│    今日の学習                        │
│    ┌─────────┬─────────┬─────────┐ │
│    │   12    │   8     │   20    │ │
│    │  復習   │  新規   │  合計   │ │
│    └─────────┴─────────┴─────────┘ │
│                                     │
│    連続学習: 🔥 7日                  │
│    正解率: 85%                      │
│                                     │
│    [学習を開始する]                  │
│                                     │
│    ┌─────────────────────────────┐ │
│    │ カテゴリー別進捗              │ │
│    │ 基礎概念      ████████ 80%  │ │
│    │ アーキテクチャ ██████   60%  │ │
│    │ 学習手法      █████    50%  │ │
│    └─────────────────────────────┘ │
│                                     │
│ [📊 詳細な進捗] [⚙️ 設定]           │
└─────────────────────────────────────┘
```

#### 要素仕様
- **統計カード**: 大きめのフォントで視認性を重視
- **学習開始ボタン**: プライマリカラーで目立つデザイン
- **カテゴリー進捗**: プログレスバーで直感的に表示
- **ナビゲーションボタン**: アイコン付きで分かりやすく

### 2. 学習画面 (/interview)

#### レイアウト（カード表面）
```
┌─────────────────────────────────────┐
│ [←] 3/20                        [×] │ ← 進捗バー
├─────────────────────────────────────┤
│                                     │
│         カテゴリー: 基礎概念          │
│         難易度: ★★☆                 │
│                                     │
│    ┌─────────────────────────────┐ │
│    │                             │ │
│    │   トークン化とは何ですか？    │ │
│    │   なぜLLMにとって重要         │ │
│    │   なのですか？               │ │
│    │                             │ │
│    └─────────────────────────────┘ │
│                                     │
│    [💡 ヒントを見る (3個)]           │
│                                     │
│    [タップして回答を見る]            │
│                                     │
│    ⏱️ 00:15                         │
│                                     │
└─────────────────────────────────────┘
```

#### レイアウト（ヒント表示時）
```
┌─────────────────────────────────────┐
│ [←] 3/20                        [×] │
├─────────────────────────────────────┤
│                                     │
│    ┌─────────────────────────────┐ │
│    │   トークン化とは何ですか？    │ │
│    │   なぜLLMにとって重要         │ │
│    │   なのですか？               │ │
│    └─────────────────────────────┘ │
│                                     │
│    💡 ヒント 1/3:                   │
│    ┌─────────────────────────────┐ │
│    │ テキストを小さな単位に        │ │
│    │ 分割する処理です              │ │
│    └─────────────────────────────┘ │
│                                     │
│    [次のヒント] [ヒントを隠す]       │
│                                     │
│    [タップして回答を見る]            │
│                                     │
└─────────────────────────────────────┘
```

#### レイアウト（カード裏面）
```
┌─────────────────────────────────────┐
│ [←] 3/20                        [×] │
├─────────────────────────────────────┤
│  ┌─────────────────────────────┐   │
│  │ 定義: トークン化は...         │   │
│  │                             │   │
│  │ 重要性: LLMは生のテキスト... │   │
│  │                             │   │
│  │ 要点:                       │   │
│  │ • 多様な言語の処理          │   │
│  │ • 未知語の管理              │   │
│  │ • 語彙サイズの最適化        │   │
│  └─────────────────────────────┘   │
│                                     │
│  💡 ヒント使用: 1個                 │
│                                     │
│  どのくらい理解できましたか？        │
│  ┌───┬───┬───┬───┬───┬───┐      │
│  │ 0 │ 1 │ 2 │ 3 │ 4 │ 5 │      │
│  └───┴───┴───┴───┴───┴───┘      │
│  忘れた          完璧に理解         │
│                                     │
└─────────────────────────────────────┘
```

### 3. 進捗画面 (/progress)

#### レイアウト
```
┌─────────────────────────────────────┐
│ [←] 進捗レポート                    │
├─────────────────────────────────────┤
│                                     │
│  学習統計                           │
│  ┌─────────────────────────────┐   │
│  │ 総カード数: 150              │   │
│  │ 習得済み: 89 (59%)           │   │
│  │ 学習中: 45 (30%)             │   │
│  │ 未学習: 16 (11%)             │   │
│  └─────────────────────────────┘   │
│                                     │
│  週間アクティビティ                  │
│  ┌─────────────────────────────┐   │
│  │ 月 火 水 木 金 土 日         │   │
│  │ ▅  ▇  ▃  ▇  ▆  █  ▄         │   │
│  └─────────────────────────────┘   │
│                                     │
│  カテゴリー別マスタリー              │
│  ┌─────────────────────────────┐   │
│  │ [カテゴリー別グラフ]          │   │
│  └─────────────────────────────┘   │
│                                     │
└─────────────────────────────────────┘
```

#### フィルター機能
- **期間選択**: 週/月/全期間のトグル
- **カテゴリー選択**: チェックボックスで複数選択可
- **難易度フィルター**: 初級/中級/上級

### 4. 設定画面 (/settings)

#### レイアウト
```
┌─────────────────────────────────────┐
│ [←] 設定                           │
├─────────────────────────────────────┤
│                                     │
│  外観                               │
│  ┌─────────────────────────────┐   │
│  │ テーマ         [☀️] Light    │   │
│  │                [🌙] Dark     │   │
│  └─────────────────────────────┘   │
│                                     │
│  学習設定                           │
│  ┌─────────────────────────────┐   │
│  │ 1日のカード数    [20] 枚     │   │
│  │ 自動フリップ     [ ] 有効    │   │
│  │ タイマー表示     [✓] 有効    │   │
│  │ 効果音          [ ] 有効     │   │
│  └─────────────────────────────┘   │
│                                     │
│  データ管理                         │
│  ┌─────────────────────────────┐   │
│  │ [データをエクスポート]         │   │
│  │ [データをインポート]           │   │
│  │ [学習記録をリセット]           │   │
│  └─────────────────────────────┘   │
│                                     │
└─────────────────────────────────────┘
```

## コンポーネント設計

### コンポーネント階層構造
```
app/
├── routes/
│   ├── _index.tsx                 # ホーム画面
│   ├── interview._index.tsx       # 学習画面メイン
│   ├── interview.$sessionId.tsx   # セッション別学習画面
│   ├── progress.tsx               # 進捗画面
│   └── settings.tsx               # 設定画面
├── components/
│   ├── layout/
│   │   ├── Header.tsx             # 共通ヘッダー
│   │   ├── Navigation.tsx         # ナビゲーションメニュー
│   │   └── Layout.tsx             # レイアウトラッパー
│   ├── flashcard/
│   │   ├── FlashCard.tsx          # フラッシュカード本体
│   │   ├── CardFront.tsx          # カード表面
│   │   ├── CardBack.tsx           # カード裏面
│   │   ├── CardControls.tsx       # カード操作ボタン
│   │   └── ProgressIndicator.tsx  # 進捗インジケーター
│   ├── study/
│   │   ├── StudySession.tsx       # 学習セッション管理
│   │   ├── QualityRating.tsx      # 回答品質評価UI
│   │   ├── Timer.tsx              # タイマー表示
│   │   └── SessionSummary.tsx     # セッション終了サマリー
│   ├── stats/
│   │   ├── DailyStats.tsx         # 日次統計
│   │   ├── CategoryChart.tsx      # カテゴリー別グラフ
│   │   ├── StreakDisplay.tsx      # 連続学習日数表示
│   │   └── AccuracyChart.tsx      # 正解率グラフ
│   └── common/
│       ├── Button.tsx              # 共通ボタン
│       ├── Card.tsx                # 共通カードコンテナ
│       ├── Modal.tsx               # モーダルダイアログ
│       └── ThemeToggle.tsx         # テーマ切り替え
```

### 主要コンポーネント詳細

#### FlashCard
```typescript
interface FlashCardProps {
  interview: Interview;
  isFlipped: boolean;
  onFlip: () => void;
  onNext: () => void;
  onPrevious: () => void;
  onRate: (quality: number) => void;
  showHint: boolean;
  onToggleHint: () => void;
}

// 責務：
// - カードの表示とフリップアニメーション
// - スワイプ/タッチジェスチャーの処理
// - キーボードショートカットの処理
```

#### StudySession
```typescript
interface StudySessionProps {
  sessionId: string;
  interviews: Interview[];
  userProgress: Record<string, UserProgress>;
  settings: UserSettings;
}

// 責務：
// - セッション全体の状態管理
// - 次に表示するカードの決定（SM-2アルゴリズム）
// - 学習記録の保存
// - セッション統計の計算
```

#### QualityRating
```typescript
interface QualityRatingProps {
  onRate: (quality: number) => void;
  disabled: boolean;
}

// 品質評価の基準：
// 0: 完全に忘れた
// 1: 間違えたが、見覚えはある
// 2: 間違えたが、正解に近かった
// 3: 正解したが、思い出すのに時間がかかった
// 4: 正解したが、少し迷った
// 5: 即座に正解した
```

#### ProgressIndicator
```typescript
interface ProgressIndicatorProps {
  current: number;
  total: number;
  correctCount: number;
  remainingCards: number;
}

// 表示内容：
// - 現在のカード番号/総数
// - 正解数
// - 残りの復習カード数
// - プログレスバー
```

## レスポンシブ対応

### ブレークポイント
- Mobile: < 640px
- Tablet: 640px - 1024px
- Desktop: > 1024px

### モバイル最適化
- タッチジェスチャー（react-swipeable使用）
- 大きめのタップターゲット（最小44x44px）
- 縦向き/横向き対応

### デスクトップ最適化
- キーボードショートカット
- ホバーエフェクト
- より詳細な情報表示

## 操作方法

### PC版
- Space: カード裏返し
- ←/→: 前後のカード
- H: ヒント表示/次のヒント
- 0-5: 難易度評価（0-5の6段階）

### モバイル版
- タップ: カード裏返し
- スワイプ左右: 前後のカード
- ヒントボタンタップ: ヒント表示
- 評価ボタンタップ: 難易度評価

## インタラクション仕様
- **カードフリップ**: 3D回転アニメーション（0.6秒）
- **評価ボタン**: 選択時に色変化とフィードバック
- **ヒント表示**: スライドダウンアニメーション（0.3秒）
- **ヒント切り替え**: フェードイン/アウト（0.2秒）
- **スワイプ**: 左右150pxでカード切り替え

## 共通UI要素

### カラーパレット
```css
/* ライトテーマ */
--primary: #3B82F6;      /* Blue-500 */
--secondary: #8B5CF6;    /* Purple-500 */
--success: #10B981;      /* Green-500 */
--warning: #F59E0B;      /* Amber-500 */
--error: #EF4444;        /* Red-500 */
--background: #FFFFFF;
--surface: #F3F4F6;
--text: #1F2937;

/* ダークテーマ */
--primary: #60A5FA;      /* Blue-400 */
--secondary: #A78BFA;    /* Purple-400 */
--background: #111827;
--surface: #1F2937;
--text: #F9FAFB;
```

### タイポグラフィ
- **見出し**: font-bold text-2xl (1.5rem)
- **本文**: font-normal text-base (1rem)
- **キャプション**: font-normal text-sm (0.875rem)
- **ボタン**: font-medium text-base

### アニメーション
- **トランジション**: all 300ms ease-in-out
- **カードフリップ**: transform 600ms ease-in-out
- **フェードイン**: opacity 300ms ease-in
- **スライド**: translateY 400ms ease-out

## アクセシビリティ対応
- ARIA属性の適切な使用
- キーボードナビゲーション完全対応
- スクリーンリーダー対応
- 高コントラストモード対応